<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agricultura 4.0 y Mercado Sostenible</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* --- RESET Y ESTILOS GLOBALES --- */
        :root {
            --primary-green: #3a5a40;
            --accent-green: #588157;
            --light-bg: #f8f9fa;
            --text-dark: #212529;
            --text-light: #495057;
            --border-color: #dee2e6;
            --white-color: #ffffff;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.8;
            color: var(--text-dark);
            background-color: var(--light-bg);
        }
        
        h1, h2, h3, h4, .nav-logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- HEADER Y NAVEGACI칍N --- */
        header {
            text-align: center;
            padding: 50px 20px;
            background: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url(https://images.pexels.com/photos/2252584/pexels-photo-2252584.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1) no-repeat center center/cover;
            color: var(--white-color);
        }

        header h1 {
            font-size: 3.2em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--primary-green);
            padding: 0 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .nav-logo { color: var(--white-color); font-size: 1.5rem; }
        .nav-links { list-style: none; display: flex; }
        .nav-links a { display: block; color: var(--white-color); text-decoration: none; font-weight: bold; padding: 1.1rem 1.3rem; transition: background-color 0.3s, color 0.3s; }
        .nav-links a:hover, .nav-links a.active { background-color: var(--accent-green); }
        .hamburger-btn { display: none; }
        .close-nav-btn { display: none; } /* Ocultar bot칩n de cierre por defecto */

        /* --- P츼GINAS PRINCIPALES Y TIENDA --- */
        .page { display: none; padding: 50px 0; animation: fadeIn 0.6s; }
        .page.active { display: block; }
        .page h2, .store-page h2 { text-align: center; font-size: 2.8rem; color: var(--primary-green); margin-bottom: 50px; font-weight: 700; }
        .content-card { background: var(--white-color); padding: 40px; border-radius: 12px; margin-bottom: 30px; box-shadow: var(--box-shadow); }
        .content-card img { width: 100%; height: 350px; object-fit: cover; border-radius: 8px; margin-bottom: 25px; }
        .content-card p { text-align: justify; } /* Justificar texto por defecto */
        .content-card h3 { color: var(--accent-green); font-size: 1.8rem; margin: 25px 0 15px; border-left: 4px solid var(--accent-green); padding-left: 15px; }
        .content-card ul { list-style-position: inside; padding-left: 10px; }
        .content-card li { margin-bottom: 10px; }
        
        /* --- ESTILOS DE LA TIENDA --- */
        .category-title { color: var(--primary-green); font-size: 2rem; margin: 50px 0 25px; border-bottom: 2px solid var(--border-color); padding-bottom: 10px;}
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: var(--white-color); border-radius: 10px; box-shadow: var(--box-shadow); overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s, box-shadow 0.3s; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12); }
        .product-card img { width: 100%; height: 200px; object-fit: cover; }
        .product-card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .product-card-content p { text-align: left; }
        .product-card .price { font-size: 1.3rem; font-weight: bold; color: var(--accent-green); margin-top: auto; padding-top: 10px; }
        .buy-btn { background: var(--accent-green); color: var(--white-color); border: none; padding: 12px; margin-top: 15px; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; transition: background-color 0.3s; width: 100%; }
        .buy-btn:hover { background: var(--primary-green); }

        /* --- BOTONES FLOTANTES --- */
        .floating-action-buttons { position: fixed; top: 80px; right: 20px; z-index: 990; display: flex; flex-direction: column; gap: 15px; transition: all 0.4s ease-in-out; }
        .fab-btn { background-color: var(--primary-green); color: var(--white-color); width: 55px; height: 55px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; font-size: 1.8em; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer; transition: all 0.3s ease; position: relative; }
        .fab-btn:hover { transform: scale(1.1); background-color: var(--accent-green); }
        #cart-item-count { position: absolute; top: -5px; right: -5px; background-color: #bc4749; color: white; border-radius: 50%; padding: 3px 8px; font-size: 0.8rem; font-family: 'Montserrat', sans-serif; font-weight: bold; display: none; }
        
        .floating-action-buttons.fab-hidden {
            transform: scale(0.5);
            opacity: 0;
            visibility: hidden;
        }

        /* --- ESTILOS DE MODALES --- */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); animation: fadeIn 0.3s; }
        .modal-content { background-color: var(--light-bg); margin: 8% auto; padding: 30px; border-radius: 10px; width: 90%; max-width: 700px; box-shadow: 0 5px 25px rgba(0,0,0,0.3); position: relative; }
        .close-modal-btn { color: #aaa; position: absolute; top: 10px; right: 25px; font-size: 35px; font-weight: bold; cursor: pointer; }
        #cart-items-list {list-style: none;}
        #cart-items-list li { display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid var(--border-color); font-size: 1.1em; flex-wrap: wrap; }
        .item-controls { display: flex; align-items: center; }
        .item-controls button { background: none; border: 1px solid var(--border-color); cursor: pointer; width: 30px; height: 30px; font-size: 1.2rem; line-height: 1; border-radius: 50%; }
        .item-controls span { margin: 0 15px; font-weight: bold; }
        #cart-footer { margin-top: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        #cart-total { font-size: 1.6rem; font-weight: bold; color: var(--primary-green); margin-bottom: 10px; }
        .cart-action-btn { background: var(--accent-green); color: white; border: none; padding: 12px 20px; font-size: 1em; border-radius: 5px; cursor: pointer; margin-left: 10px; }
        .cart-action-btn.danger { background: #bc4749; }
        .chat-window { height: 400px; border: 1px solid var(--border-color); border-radius: 5px; overflow-y: auto; padding: 15px; margin-bottom: 15px; display: flex; flex-direction: column; background: var(--white-color); }
        .chat-message { max-width: 80%; padding: 12px 18px; border-radius: 18px; margin-bottom: 10px; line-height: 1.5; }
        .user-message { background: var(--accent-green); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .bot-message { background: #e9e9e9; color: var(--text-dark); align-self: flex-start; border-bottom-left-radius: 4px; }
        .bot-message p { margin: 0.5em 0; }
        #chat-input-form { display: flex; }
        #chat-input { flex-grow: 1; padding: 12px; border: 1px solid var(--border-color); border-radius: 5px 0 0 5px; }
        #chat-send-btn { padding: 12px 20px; background: var(--accent-green); color: white; border: none; cursor: pointer; border-radius: 0 5px 5px 0; }
        
        /* --- NOTIFICACIONES, FOOTER Y ANIMACIONES --- */
        .notification { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: var(--primary-green); color: white; padding: 15px 25px; border-radius: 5px; z-index: 3000; box-shadow: 0 3px 10px rgba(0,0,0,0.2); animation: slideUp 0.4s ease-out; }
        footer { background: var(--primary-green); color: var(--white-color); text-align: center; padding: 30px; margin-top: 40px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translate(-50%, 100%); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
        

        /* --- MEDIA QUERIES PARA RESPONSIVIDAD (TABLET Y M칍VIL) --- */
        
        @media (max-width: 850px) {
            .hamburger-btn { display: block; background: none; border: none; font-size: 2rem; color: var(--white-color); padding: 1rem; cursor: pointer; z-index: 1002; transition: opacity 0.3s, visibility 0.3s;}
            
            .nav-links { 
                position: fixed; 
                top: 0; 
                right: -100%; 
                width: 300px; 
                height: 100vh; 
                background: #2f4538; 
                flex-direction: column; 
                padding-top: 5rem; 
                transition: right 0.4s ease-in-out; 
                box-shadow: -5px 0 15px rgba(0,0,0,0.2);
            }
            .nav-links.active { right: 0; }
            .nav-links a { width: 100%; text-align: center; }

            .close-nav-btn {
                display: block;
                position: absolute;
                top: 20px;
                right: 25px;
                background: none;
                border: none;
                color: var(--white-color);
                font-size: 2.5rem;
                cursor: pointer;
            }
            .floating-action-buttons {
                top: auto;
                bottom: 25px;
                right: 20px;
            }
            
            body.nav-open .hamburger-btn {
                opacity: 0;
                visibility: hidden;
            }
            
            header h1 { font-size: 2.5em; }
            .page h2, .store-page h2 { font-size: 2.2rem; }
            .content-card h3 { font-size: 1.5rem; }
        }

        @media (max-width: 768px) {
            .container { padding: 15px; }
            .page { padding: 30px 0; }
            .content-card { padding: 25px; }
            .content-card img { height: 250px; }
            
            .modal-content {
                width: 95%;
                margin: 15% auto;
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            body { line-height: 1.7; }
            header { padding: 40px 15px; }
            header h1 { font-size: 2em; flex-direction: column; gap: 5px; }
            .page h2, .store-page h2 { font-size: 1.8rem; margin-bottom: 30px; }

            .nav-links { width: 100%; }
            .content-card img { height: 200px; }

            .floating-action-buttons { right: 15px; bottom: 20px; }
            .fab-btn { width: 50px; height: 50px; font-size: 1.6em; }

            #cart-items-list li {
                font-size: 1em;
                justify-content: space-between;
            }
            #cart-items-list li > span:first-child { 
                width: 100%; 
                margin-bottom: 10px; 
            }
            #cart-footer {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            #cart-footer div {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            #cart-total { 
                font-size: 1.4rem;
                text-align: center;
             }
            .cart-action-btn { 
                margin-left: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>游꺔 Agricultura 4.0</h1>
        <p>Innovaci칩n, Sostenibilidad y Mercado</p>
    </header>
    
    <nav class="navbar">
        <div class="nav-logo">Agro-Sostenible</div>
        <ul class="nav-links" id="nav-links">
            <button class="close-nav-btn" id="close-nav-btn">&times;</button>
            <li><a href="#introduccion" class="nav-link active" data-page="introduccion">Introducci칩n</a></li>
            <li><a href="#tecnologias" class="nav-link" data-page="tecnologias">Tecnolog칤as</a></li>
            <li><a href="#iot" class="nav-link" data-page="iot">IoT</a></li>
            <li><a href="#impacto" class="nav-link" data-page="impacto">Impacto</a></li>
            <li><a href="#futuro" class="nav-link" data-page="futuro">Futuro</a></li>
            <li><a href="#tienda" class="nav-link" data-page="tienda">游낅 Tienda</a></li>
        </ul>
        <button class="hamburger-btn" id="hamburger-btn">&#9776;</button>
    </nav>

    <!-- Botones flotantes -->
    <div class="floating-action-buttons" id="fab-container">
        <button id="cart-fab" class="fab-btn" aria-label="Abrir carrito de compras">
            游
            <span id="cart-item-count">0</span>
        </button>
        <button id="chatbot-fab" class="fab-btn" aria-label="Abrir asistente virtual">
            游뱄
        </button>
    </div>

    <div class="container">
        <!-- P츼GINA DE INTRODUCCI칍N -->
        <div id="introduccion" class="page active">
            <h2>Bienvenido a la Revoluci칩n Agr칤cola</h2>
            <div class="content-card">
                <img src="https://images.pexels.com/photos/235725/pexels-photo-235725.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Campo de cultivo moderno y tecnol칩gico">
                <h3>쯈u칠 es la Agricultura 4.0?</h3>
                <p>La Agricultura 4.0, tambi칠n conocida como agricultura inteligente o "smart farming", es la fase m치s reciente de la evoluci칩n agr칤cola. Se define por la aplicaci칩n de tecnolog칤as de la informaci칩n y la comunicaci칩n (TIC) avanzadas en la agricultura para crear un sistema de gesti칩n m치s eficiente, productivo y sostenible. El objetivo es enfrentar desaf칤os cr칤ticos como el crecimiento de la poblaci칩n mundial, el cambio clim치tico y la escasez de recursos naturales (agua, tierra), produciendo "m치s con menos".</p>
                <h3>Pilares Fundamentales</h3>
                <ul>
                    <li><strong>Datos como activo principal:</strong> La recopilaci칩n, an치lisis y utilizaci칩n de grandes vol칰menes de datos (Big Data) para fundamentar cada decisi칩n en el campo.</li>
                    <li><strong>Interconectividad:</strong> La conexi칩n en tiempo real entre maquinaria, sensores y plataformas de gesti칩n a trav칠s del Internet de las Cosas (IoT).</li>
                    <li><strong>Automatizaci칩n y Rob칩tica:</strong> El uso de maquinaria aut칩noma para realizar tareas repetitivas y de alta precisi칩n, desde la siembra hasta la cosecha.</li>
                    <li><strong>Sostenibilidad:</strong> Un enfoque en la optimizaci칩n del uso de insumos (agua, fertilizantes, pesticidas) para minimizar el impacto ambiental y mejorar la salud del ecosistema.</li>
                </ul>
            </div>
        </div>

        <!-- OTRAS P츼GINAS (TECNOLOG칈AS, IOT, IMPACTO, FUTURO, TIENDA) -->
        <div id="tecnologias" class="page">
            <h2>Tecnolog칤as que Transforman el Campo</h2>
            <div class="content-card">
                <img src="https://www.oleorevista.com/images/showid2/7615001?w=900&mh=700" alt="Dron agr칤cola sobrevolando un vi침edo">
                <h3>Aplicaciones T칠cnicas de Vanguardia</h3>
                <p>La Agricultura 4.0 no es una sola tecnolog칤a, sino la sinergia de varias. Estas son algunas de las m치s impactantes:</p>
                <ul>
                    <li><strong>Sensores y IoT:</strong> Sensores en el campo miden en tiempo real variables cr칤ticas como la humedad y pH del suelo, la electroconductividad, y los niveles de nutrientes. Estos datos son transmitidos a una plataforma central para su an치lisis.</li>
                    <li><strong>Drones y Sat칠lites (Teledetecci칩n):</strong> Equipados con c치maras multiespectrales, los drones generan mapas de vigor de los cultivos (칈ndice de Vegetaci칩n de Diferencia Normalizada - NDVI), permitiendo detectar estr칠s h칤drico, plagas o deficiencias nutricionales en zonas espec칤ficas antes de que sean visibles a simple vista.</li>
                    <li><strong>Inteligencia Artificial (IA) y Machine Learning:</strong> Algoritmos de IA analizan datos hist칩ricos y en tiempo real para predecir rendimientos, identificar patrones de enfermedades, y optimizar el riego y la fertilizaci칩n. La visi칩n por computadora permite a los robots distinguir entre malezas y cultivos para una aplicaci칩n de herbicidas ultra-precisa.</li>
                     <li><strong>GPS y Maquinaria de Precisi칩n:</strong> Tractores y cosechadoras aut칩nomas utilizan GPS de alta precisi칩n (RTK) para seguir rutas optimizadas, aplicar insumos con precisi칩n centim칠trica (tasa variable) y evitar solapamientos, ahorrando combustible y productos.</li>
                </ul>
            </div>
        </div>
        <div id="iot" class="page">
            <h2>El Ecosistema Conectado del IoT Agr칤cola</h2>
             <div class="content-card">
                <img src="https://img.freepik.com/fotos-premium/verduras-frescas-invernadero-infografias-agricultura-inteligente-agricultura-precision-40-icono-visual-agricultura-tecnologia-digital-concepto-agricultura-inteligente_35148-9118.jpg" alt="Agricultor usando una tablet para monitorear datos del campo">
                <h3>Componentes de un Sistema IoT</h3>
                <p>El Internet de las Cosas (IoT) es el sistema nervioso central de la granja inteligente. Un ecosistema IoT agr칤cola t칤picamente consta de:</p>
                <ul>
                    <li><strong>Capa de Percepci칩n (Sensores):</strong> Dispositivos que capturan datos f칤sicos del entorno.</li>
                    <li><strong>Capa de Red (Conectividad):</strong> La infraestructura que transmite los datos desde los sensores.</li>
                    <li><strong>Capa de Plataforma (Procesamiento):</strong> El software que recibe, almacena, procesa y visualiza los datos.</li>
                    <li><strong>Capa de Aplicaci칩n (Actuadores):</strong> Los dispositivos que ejecutan acciones basadas en el an치lisis de datos.</li>
                </ul>
            </div>
        </div>
        <div id="impacto" class="page">
            <h2>Impacto Real y Medible en el Sector</h2>
            <div class="content-card">
                 <img src="https://images.pexels.com/photos/716107/pexels-photo-716107.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Manos de agricultor sosteniendo tierra f칠rtil y un brote verde">
                <h3>Impacto Econ칩mico</h3>
                 <ul>
                    <li><strong>Aumento de la Rentabilidad:</strong> La optimizaci칩n de insumos puede reducir los costos de producci칩n hasta en un 20%.</li>
                    <li><strong>Reducci칩n de Riesgos:</strong> La detecci칩n temprana de problemas minimiza las p칠rdidas de cosechas.</li>
                </ul>
                 <h3>Impacto Ambiental (Sostenibilidad)</h3>
                 <ul>
                    <li><strong>Eficiencia H칤drica:</strong> El riego de precisi칩n puede reducir el consumo de agua entre un 30% y un 50%.</li>
                    <li><strong>Reducci칩n de la Huella de Carbono:</strong> La optimizaci칩n del uso de maquinaria y fertilizantes disminuye las emisiones.</li>
                    <li><strong>Salud del Suelo:</strong> La agricultura de precisi칩n evita la sobre-fertilizaci칩n, promoviendo la salud del ecosistema.</li>
                </ul>
            </div>
        </div>
        <div id="futuro" class="page">
            <h2>Desaf칤os y Visiones para el Futuro</h2>
             <div class="content-card">
                 <img src="https://i0.wp.com/fevexhabana.net/wp-content/uploads/2024/07/15-Cutting-Edge-Farming-Technologies-Revolutionizing-Agriculture.png?resize=1080%2C675&ssl=1" alt="Investigador trabajando con biotecnolog칤a en un laboratorio agr칤cola">
                 <h3>Tendencias Emergentes</h3>
                 <ul>
                    <li><strong>Hiperautomatizaci칩n y "Digital Twins":</strong> Creaci칩n de r칠plicas virtuales de una granja para simular y optimizar estrategias.</li>
                    <li><strong>Biotecnolog칤a y Gen칩mica:</strong> Integraci칩n de datos gen칩micos para desarrollar variedades de cultivos ultra-adaptadas.</li>
                    <li><strong>Blockchain para la Trazabilidad:</strong> Creaci칩n de un registro inmutable de toda la cadena de suministro.</li>
                </ul>
                 <h3>Desaf칤os a Superar</h3>
                 <ul>
                    <li><strong>Brecha Digital:</strong> Asegurar el acceso y capacitaci칩n para peque침os y medianos agricultores.</li>
                    <li><strong>Interoperabilidad:</strong> Estandarizar formatos de datos entre diferentes fabricantes.</li>
                    <li><strong>Ciberseguridad:</strong> Proteger las granjas conectadas de posibles ataques cibern칠ticos.</li>
                </ul>
            </div>
        </div>
        <div id="tienda" class="page store-page">
             <h2>Nuestros Productos Frescos</h2>
            <h3 class="category-title">Productos Acu칤colas</h3>
            <div class="products-grid">
                 <div class="product-card"> <img src="https://www.inpesca.gob.ni/images/subidas%20de%20imagenes/2022/Nicaragua%20busca%20ampliar%20exponencialmente%20sus%20capacidades%20en%20camaronicultura/camarones%20jairo10.jpeg" alt="Camarones Frescos"> <div class="product-card-content"> <h3>Camarones de Cultivo</h3> <p>Criados de forma sostenible, ideales para paellas o al ajillo.</p> <div class="price">$15.00 / kg</div> <button class="buy-btn" onclick="addToCart('camarones', 'Camarones', 15.00)">A침adir al Carrito</button> </div> </div>
                 <div class="product-card"> <img src="https://d2j6dbq0eux0bg.cloudfront.net/images/38699127/1780894625.jpg" alt="Filete de Tilapia Fresco"> <div class="product-card-content"> <h3>Filete de Tilapia</h3> <p>De granja, fileteada y lista para cocinar. Carne blanca y suave.</p> <div class="price">$10.50 / kg</div> <button class="buy-btn" onclick="addToCart('tilapia', 'Filete de Tilapia', 10.50)">A침adir al Carrito</button> </div> </div>
            </div>
            <h3 class="category-title">Productos Ganaderos</h3>
            <div class="products-grid">
                <div class="product-card"> <img src="https://images.pexels.com/photos/65175/pexels-photo-65175.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Entrecot de Res"><div class="product-card-content"><h3>Entrecot de Res Premium</h3> <p>Corte jugoso y tierno de ganado criado en pastos. Madurado 30 d칤as.</p><div class="price">$25.00 / kg</div><button class="buy-btn" onclick="addToCart('res', 'Entrecot de Res', 25.00)">A침adir al Carrito</button></div></div>
                <div class="product-card"> <img src="https://sierradebaza.org/images/noticias/imagenes_22-08/Imagen_7a.jpg" alt="Queso de Cabra"><div class="product-card-content"><h3>Queso de Cabra Artesanal</h3> <p>Queso fresco de granjas locales. Sabor intenso y textura cremosa.</p><div class="price">$12.00 / unidad</div><button class="buy-btn" onclick="addToCart('queso', 'Queso de Cabra', 12.00)">A침adir al Carrito</button></div></div>
            </div>
            <h3 class="category-title">Productos Vegetales</h3>
            <div class="products-grid">
                <div class="product-card"> <img src="https://images.pexels.com/photos/1400172/pexels-photo-1400172.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Tomates Cherry"><div class="product-card-content"><h3>Tomates Cherry Org치nicos</h3> <p>Cultivados sin pesticidas, dulces y jugosos.</p><div class="price">$5.00 / kg</div><button class="buy-btn" onclick="addToCart('tomates', 'Tomates Cherry', 5.00)">A침adir al Carrito</button></div></div>
                 <div class="product-card"> <img src="https://thumbs.dreamstime.com/z/lechugas-frescas-en-la-verduler%C3%ADa-local-verduras-de-hojas-verdes-el-puesto-205151166.jpg" alt="Lechuga Fresca"><div class="product-card-content"><h3>Lechuga Romana Fresca</h3> <p>Hojas crujientes y frescas, de nuestro huerto hidrop칩nico.</p><div class="price">$2.00 / unidad</div><button class="buy-btn" onclick="addToCart('lechuga', 'Lechuga Romana', 2.00)">A침adir al Carrito</button></div></div>
            </div>
        </div>
    </div>
    
    <footer><p>춸 2025 Agro-Sostenible - Innovando el Futuro del Campo</p></footer>
    
    <!-- MODALES -->
    <div id="cart-modal" class="modal"><div class="modal-content"><span class="close-modal-btn" id="close-cart-btn">&times;</span><h2>Tu Carrito de Compras</h2><ul id="cart-items-list"><p>Tu carrito est치 vac칤o.</p></ul><hr><div id="cart-footer"><div id="cart-total">Total: $0.00</div><div><button class="cart-action-btn danger" onclick="emptyCart()">Vaciar Carrito</button><button class="cart-action-btn" onclick="simulatePurchase()">Simular Compra</button></div></div></div></div>
    <div id="chatbot-modal" class="modal"><div class="modal-content"><span class="close-modal-btn" id="close-chatbot-btn">&times;</span><h2>Asistente Virtual</h2><div class="chat-window" id="chat-window"></div><form id="chat-input-form"><input type="text" id="chat-input" placeholder="Escribe el n칰mero de la opci칩n..." autocomplete="off"><button type="submit" id="chat-send-btn">Enviar</button></form></div></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navMenu = document.getElementById('nav-links');
            const closeMobileMenu = () => {
                navMenu.classList.remove('active');
                document.body.classList.remove('nav-open');
            };
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('data-page');
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(pageId).classList.add('active');
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    closeMobileMenu();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            const hamburger = document.getElementById('hamburger-btn');
            const closeNav = document.getElementById('close-nav-btn');
            hamburger.addEventListener('click', () => {
                navMenu.classList.add('active');
                document.body.classList.add('nav-open');
            });
            closeNav.addEventListener('click', closeMobileMenu);

            const cartFab = document.getElementById('cart-fab');
            const cartModal = document.getElementById('cart-modal');
            const closeCartBtn = document.getElementById('close-cart-btn');
            window.cart = [];

            window.addToCart = (id, name, price) => {
                const existingItem = cart.find(item => item.id === id);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ id, name, price, quantity: 1 });
                }
                showNotification(`"${name}" fue a침adido al carrito.`);
                updateCart();
            };
            window.updateCart = () => {
                const cartList = document.getElementById('cart-items-list');
                const cartTotalElem = document.getElementById('cart-total');
                const cartCountElem = document.getElementById('cart-item-count');
                cartList.innerHTML = '';
                let total = 0;
                let totalItems = 0;
                if (cart.length === 0) {
                    cartList.innerHTML = '<p>Tu carrito est치 vac칤o.</p>';
                } else {
                    cart.forEach(item => {
                        const li = document.createElement('li');
                        li.innerHTML = `<span>${item.name}</span><div class="item-controls"><button onclick="changeQuantity('${item.id}', -1)">-</button><span>${item.quantity}</span><button onclick="changeQuantity('${item.id}', 1)">+</button></div><span>$${(item.price * item.quantity).toFixed(2)}</span>`;
                        cartList.appendChild(li);
                        total += item.price * item.quantity;
                        totalItems += item.quantity;
                    });
                }
                cartTotalElem.textContent = `Total: $${total.toFixed(2)}`;
                if (totalItems > 0) {
                    cartCountElem.textContent = totalItems;
                    cartCountElem.style.display = 'flex';
                } else {
                    cartCountElem.style.display = 'none';
                }
            };
            window.changeQuantity = (id, change) => {
                const item = cart.find(i => i.id === id);
                if (item) {
                    item.quantity += change;
                    if (item.quantity <= 0) {
                        cart = cart.filter(i => i.id !== id);
                    }
                    updateCart();
                }
            };
            window.emptyCart = () => {
                if (cart.length > 0) {
                    cart = [];
                    showNotification("El carrito ha sido vaciado.");
                    updateCart();
                }
            };
            window.simulatePurchase = () => {
                if (cart.length === 0) {
                    showNotification("Tu carrito est치 vac칤o.", "danger"); return;
                }
                showNotification("춰Gracias por tu compra simulada!");
                cart = [];
                updateCart();
                cartModal.style.display = 'none';
            };
            cartFab.addEventListener('click', (e) => { e.preventDefault(); cartModal.style.display = 'block'; });
            closeCartBtn.addEventListener('click', () => cartModal.style.display = 'none');
            
            const chatbotFab = document.getElementById('chatbot-fab');
            const chatbotModal = document.getElementById('chatbot-modal');
            const closeChatbotBtn = document.getElementById('close-chatbot-btn');
            const chatWindow = document.getElementById('chat-window');
            const chatInputForm = document.getElementById('chat-input-form');
            const chatInput = document.getElementById('chat-input');
            const botKnowledge = { currentState: 'main', mainMenu: `춰Hola! Soy tu asistente. 쮺칩mo puedo ayudarte? <p>1. Info sobre Agricultura 4.0</p> <p>2. Info sobre productos</p>`, init: function() { addMessageToChat(this.mainMenu, 'bot', true); this.initialized = true; }};

            function addMessageToChat(message, sender, isHtml = false) {
                const messageElem = document.createElement('div');
                messageElem.classList.add('chat-message', `${sender}-message`);
                if (isHtml) messageElem.innerHTML = message;
                else messageElem.textContent = message;
                chatWindow.appendChild(messageElem);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
            function handleChat(userInput) {
                const choice = parseInt(userInput); let responseHtml;
                switch (botKnowledge.currentState) {
                    case 'main':
                        if (choice === 1) { botKnowledge.currentState = 'info'; responseHtml = `쯉obre qu칠 tema t칠cnico quieres saber? <p>1. 쯈u칠 es?</p> <p>2. Tecnolog칤as</p> <p>3. IoT</p> <p>4. Impacto</p> <p>5. Futuro</p> <p>0. Volver</p>`;} 
                        else if (choice === 2) { botKnowledge.currentState = 'products'; responseHtml = `Elige una categor칤a: <p>1. Acu칤colas</p> <p>2. Ganaderos</p> <p>3. Vegetales</p> <p>0. Volver</p>`;} 
                        else { responseHtml = 'Opci칩n no v치lida.'; }
                        break;
                    case 'info':
                        const infoResponses = [ 'Es la integraci칩n de tecnolog칤as digitales en la agricultura para hacerla m치s eficiente.', 'Usamos Drones, Sensores (IoT) e Inteligencia Artificial.', 'El IoT nos permite conectar sensores para medir datos del campo en tiempo real.', 'El impacto es mayor eficiencia, reducci칩n de costos y mayor sostenibilidad.', 'El futuro incluye granjas automatizadas y trazabilidad con Blockchain.' ];
                        if (choice > 0 && choice <= infoResponses.length) { responseHtml = `${infoResponses[choice - 1]}<br><br>쯆tro tema? (Elige un n칰mero o 0 para volver)`; } 
                        else if (choice === 0) { botKnowledge.currentState = 'main'; responseHtml = botKnowledge.mainMenu; } 
                        else { responseHtml = 'Opci칩n no v치lida.'; }
                        break;
                    case 'products':
                         const productResponses = [ 'Ofrecemos Camarones de cultivo sostenible y Filetes de Tilapia frescos.', 'Tenemos Entrecot de Res Premium y Queso de Cabra artesanal.', 'Tenemos Tomates Cherry org치nicos y Lechuga Romana hidrop칩nica.' ];
                         if (choice > 0 && choice <= productResponses.length) { responseHtml = `${productResponses[choice - 1]}<br><br>쯆tra categor칤a? (Elige un n칰mero o 0 para volver)`; } 
                         else if (choice === 0) { botKnowledge.currentState = 'main'; responseHtml = botKnowledge.mainMenu; } 
                         else { responseHtml = 'Opci칩n no v치lida.'; }
                        break;
                    default: botKnowledge.currentState = 'main'; responseHtml = botKnowledge.mainMenu; break;
                }
                setTimeout(() => addMessageToChat(responseHtml, 'bot', true), 500);
            }
            chatInputForm.addEventListener('submit', (e) => {
                e.preventDefault(); const userInput = chatInput.value.trim();
                if (userInput) { addMessageToChat(userInput, 'user'); chatInput.value = ''; handleChat(userInput); }
            });
            chatbotFab.addEventListener('click', (e) => { e.preventDefault(); chatbotModal.style.display = 'block'; if (!botKnowledge.initialized) botKnowledge.init(); });
            closeChatbotBtn.addEventListener('click', () => chatbotModal.style.display = 'none');
            
            function showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`; notification.textContent = message;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }
            window.onclick = function(event) {
                if (event.target == cartModal) cartModal.style.display = 'none';
                if (event.target == chatbotModal) chatbotModal.style.display = 'none';
            }

            // --- L칍GICA MEJORADA: OCULTAR/MOSTRAR BOTONES FLOTANTES AL HACER SCROLL ---
            const fabContainer = document.getElementById('fab-container');
            let lastScrollTop = 0;

            window.addEventListener('scroll', () => {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // AJUSTE: Se aumenta el umbral a 2000px para que los botones tarden m치s en ocultarse.
                if (scrollTop > lastScrollTop && scrollTop > 2000) {
                    // Scrolleando hacia abajo Y despu칠s de pasar los 400px
                    fabContainer.classList.add('fab-hidden');
                } else {
                    // Scrolleando hacia arriba
                    fabContainer.classList.remove('fab-hidden');
                }
                
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            }, false);

        });
    </script>
</body>
</html>